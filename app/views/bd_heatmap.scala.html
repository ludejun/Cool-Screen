<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <script type="text/javascript" src="http://api.map.baidu.com/library/AreaRestriction/1.2/src/AreaRestriction_min.js"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=bAKZxvhoHXrMbUwKnuHlPCzQGf29mIAf"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/library/Heatmap/2.0/src/Heatmap_min.js"></script>
    <title>万达广场热力图</title>
    <style type="text/css">
		#container{height:80%;width:100%;}
		#r-result{width:100%;}
    </style>
    <link rel="stylesheet" href=@routes.Assets.at("css/bd_heatmap_main.css")>
    <link rel="stylesheet" href=@routes.Assets.at("css/bd_heatmap.css")>
</head>
<body>
  <div class="full">
    <div class="header">
        <div class="logo">万达集团</div>
        <div class="title">万达广场热力图</div>
    </div>
    <div id="container"></div>
  </div>
</body>
</html>
<script type="text/javascript">
    var map = new BMap.Map("container");          // 创建地图实例
    map.setMapStyle({style:'midnight'});
    var point = new BMap.Point(121.520425, 31.307676);
    map.centerAndZoom(point, 17);             // 初始化地图，设置中心点坐标和地图级别
    map.enableScrollWheelZoom(); // 允许滚轮缩放
    var marker = new BMap.Marker(point);  // 创建标注
    map.addOverlay(marker);               // 将标注添加到地图中
    marker.setAnimation(BMAP_ANIMATION_BOUNCE); //跳动的动画
    var opts = {
        position : point,    // 指定文本标注所在的地理位置
        offset   : new BMap.Size(10, -50)    //设置文本偏移量
    }
    var label = new BMap.Label("万达广场（上海五角场店）", opts);  // 创建文本标注对象
    label.setStyle({
                     color : "white",
                     fontSize : "12px",
                     height : "20px",
                     lineHeight : "20px",
                     fontFamily:"微软雅黑",
                     fontWeight: 12,
                     backgroundColor: "transparent"
		 });
    map.addOverlay(label);
    var b = new BMap.Bounds(new BMap.Point(121.400143, 31.204348),new BMap.Point(121.630025, 31.400349));
    try {
        BMapLib.AreaRestriction.setBounds(map, b);
    } catch (e) {
        alert(e);
    }

    var points =[
    {"lng":121.519557,"lat":31.308254,"count":5},
    {"lng":121.518367,"lat":31.30743,"count":3},
    {"lng":121.520312,"lat":31.307621,"count":100},
    {"lng":121.519874,"lat":31.307447,"count":87},
    {"lng":121.520225,"lat":31.308091,"count":32},
    {"lng":121.518801,"lat":31.308854,"count":44},
    {"lng":121.518129,"lat":31.308227,"count":21},
    {"lng":121.526426,"lat":31.308286,"count":80},
    {"lng":121.518597,"lat":31.30748,"count":32},
    {"lng":121.519895,"lat":31.307787,"count":26},
    {"lng":121.519563,"lat":31.308197,"count":17},
    {"lng":121.518982,"lat":31.308547,"count":17},
    {"lng":121.526126,"lat":31.308938,"count":25},
    {"lng":121.51926,"lat":31.307782,"count":100},
    {"lng":121.518239,"lat":31.308759,"count":39},
    {"lng":121.518185,"lat":31.307123,"count":11},
    {"lng":121.518237,"lat":31.307518,"count":9},
    {"lng":121.518784,"lat":31.307754,"count":47},
    {"lng":121.520193,"lat":31.307061,"count":52},
    {"lng":121.519735,"lat":31.307619,"count":100},
    {"lng":121.518495,"lat":31.307958,"count":46},
    {"lng":121.526292,"lat":31.308166,"count":9},
    {"lng":121.518916,"lat":31.308055,"count":8},
    {"lng":121.51889,"lat":31.308308,"count":11},
    {"lng":121.519765,"lat":31.307376,"count":3},
    {"lng":121.518232,"lat":31.307348,"count":50},
    {"lng":121.518554,"lat":31.307511,"count":15},
    {"lng":121.518568,"lat":31.308161,"count":23},
    {"lng":121.519461,"lat":31.308306,"count":3},
    {"lng":121.51932,"lat":31.30861,"count":13},
    {"lng":121.5184,"lat":31.308616,"count":6},
    {"lng":121.520679,"lat":31.307499,"count":21},
    {"lng":121.51871,"lat":31.307738,"count":29},
    {"lng":121.518836,"lat":31.308998,"count":99},
    {"lng":121.520755,"lat":31.308001,"count":10},
    {"lng":121.520077,"lat":31.307655,"count":14},
    {"lng":121.526092,"lat":31.308995,"count":16},
    {"lng":121.51935,"lat":31.308054,"count":15},
    {"lng":121.519022,"lat":31.308895,"count":13},
    {"lng":121.519551,"lat":31.308373,"count":17},
    {"lng":121.518191,"lat":31.308572,"count":1},
    {"lng":121.518612,"lat":31.307119,"count":9},
    {"lng":121.518237,"lat":31.308337,"count":54},
    {"lng":121.519776,"lat":31.308919,"count":26},
    {"lng":121.518694,"lat":31.30736,"count":17},
    {"lng":121.519377,"lat":31.308137,"count":19},
    {"lng":121.518434,"lat":31.308394,"count":43},
    {"lng":121.51988,"lat":31.308622,"count":27},
    {"lng":121.518345,"lat":31.307467,"count":8},
    {"lng":121.526883,"lat":31.307171,"count":3},
    {"lng":121.519877,"lat":31.308659,"count":34},
    {"lng":121.519712,"lat":31.307613,"count":14},
    {"lng":121.518869,"lat":31.308416,"count":12},
    {"lng":121.526956,"lat":31.307377,"count":11},
    {"lng":121.52066,"lat":31.307017,"count":38},
    {"lng":121.526244,"lat":31.307215,"count":91},
    {"lng":121.51829,"lat":31.307908,"count":54},
    {"lng":121.519116,"lat":31.307658,"count":21},
    {"lng":121.5183,"lat":31.307015,"count":15},
    {"lng":121.518969,"lat":31.308527,"count":3},
    {"lng":121.519936,"lat":31.308854,"count":24},
    {"lng":121.51805,"lat":31.307217,"count":12},
    {"lng":121.520579,"lat":31.308987,"count":57},
    {"lng":121.52076,"lat":31.307251,"count":70},
    {"lng":121.518261,"lat":31.308984,"count":50},
    {"lng":121.519332,"lat":31.308532,"count":51},
    {"lng":121.518787,"lat":31.307658,"count":15},
    {"lng":121.518455,"lat":31.307921,"count":40},
    {"lng":121.518843,"lat":31.307516,"count":100},
    {"lng":121.51946,"lat":31.308503,"count":6},
    {"lng":121.519289,"lat":31.307989,"count":18},
    {"lng":121.518162,"lat":31.307051,"count":80},
    {"lng":121.519039,"lat":31.30782,"count":11},
    {"lng":121.51987,"lat":31.307253,"count":7},
    {"lng":121.51873,"lat":31.307426,"count":42},
    {"lng":121.518107,"lat":31.308445,"count":4},
    {"lng":121.518521,"lat":31.307943,"count":27},
    {"lng":121.518812,"lat":31.307836,"count":23},
    {"lng":121.520682,"lat":31.30863,"count":60},
    {"lng":121.519424,"lat":31.308675,"count":8},
    {"lng":121.518242,"lat":31.308509,"count":15},
    {"lng":121.519766,"lat":31.308408,"count":25},
    {"lng":121.518674,"lat":31.308396,"count":21},
    {"lng":121.518268,"lat":31.30867,"count":1},
    {"lng":121.518721,"lat":31.307034,"count":51},
    {"lng":121.519456,"lat":31.30867,"count":7},
    {"lng":121.520432,"lat":31.307114,"count":11},
    {"lng":121.519013,"lat":31.308611,"count":35},
    {"lng":121.518733,"lat":31.308037,"count":22},
    {"lng":121.518336,"lat":31.308134,"count":4},
    {"lng":121.519557,"lat":31.308254,"count":5},
    {"lng":121.518367,"lat":31.30743,"count":3},
    {"lng":121.520312,"lat":31.307621,"count":100},
    {"lng":121.519874,"lat":31.307447,"count":87},
    {"lng":121.520225,"lat":31.308091,"count":32},
    {"lng":121.518801,"lat":31.308854,"count":44},
    {"lng":121.518129,"lat":31.308227,"count":21},
    {"lng":121.526426,"lat":31.308286,"count":80},
    {"lng":121.518597,"lat":31.30748,"count":32},
    {"lng":121.519895,"lat":31.307787,"count":26},
    {"lng":121.519563,"lat":31.308197,"count":17},
    {"lng":121.518982,"lat":31.308547,"count":17},
    {"lng":121.526126,"lat":31.308938,"count":25},
    {"lng":121.51926,"lat":31.307782,"count":100},
    {"lng":121.518239,"lat":31.308759,"count":39},
    {"lng":121.518185,"lat":31.307123,"count":11},
    {"lng":121.518237,"lat":31.307518,"count":9},
    {"lng":121.518784,"lat":31.307754,"count":47},
    {"lng":121.520193,"lat":31.307061,"count":52},
    {"lng":121.519735,"lat":31.307619,"count":100},
    {"lng":121.518495,"lat":31.307958,"count":46},
    {"lng":121.526292,"lat":31.308166,"count":9},
    {"lng":121.518916,"lat":31.308055,"count":8},
    {"lng":121.51889,"lat":31.308308,"count":11},
    {"lng":121.519765,"lat":31.307376,"count":3},
    {"lng":121.518232,"lat":31.307348,"count":50},
    {"lng":121.518554,"lat":31.307511,"count":15},
    {"lng":121.518568,"lat":31.308161,"count":23},
    {"lng":121.519461,"lat":31.308306,"count":3},
    {"lng":121.51932,"lat":31.30861,"count":13},
    {"lng":121.5184,"lat":31.308616,"count":6},
    {"lng":121.520679,"lat":31.307499,"count":21},
    {"lng":121.51871,"lat":31.307738,"count":29},
    {"lng":121.518836,"lat":31.308998,"count":99},
    {"lng":121.520755,"lat":31.308001,"count":10},
    {"lng":121.520077,"lat":31.307655,"count":14},
    {"lng":121.526092,"lat":31.308995,"count":16},
    {"lng":121.51935,"lat":31.308054,"count":15},
    {"lng":121.519022,"lat":31.308895,"count":13},
    {"lng":121.519551,"lat":31.308373,"count":17},
    {"lng":121.518191,"lat":31.308572,"count":1},
    {"lng":121.518612,"lat":31.307119,"count":9},
    {"lng":121.518237,"lat":31.308337,"count":54},
    {"lng":121.519776,"lat":31.308919,"count":26},
    {"lng":121.518694,"lat":31.30736,"count":17},
    {"lng":121.519377,"lat":31.308137,"count":19},
    {"lng":121.518434,"lat":31.308394,"count":43},
    {"lng":121.51988,"lat":31.308622,"count":27},
    {"lng":121.518345,"lat":31.307467,"count":8},
    {"lng":121.526883,"lat":31.307171,"count":3},
    {"lng":121.519877,"lat":31.308659,"count":34},
    {"lng":121.519712,"lat":31.307613,"count":14},
    {"lng":121.518869,"lat":31.308416,"count":12},
    {"lng":121.526956,"lat":31.307377,"count":11},
    {"lng":121.52066,"lat":31.307017,"count":38},
    {"lng":121.526244,"lat":31.307215,"count":91},
    {"lng":121.51829,"lat":31.307908,"count":54},
    {"lng":121.519116,"lat":31.307658,"count":21},
    {"lng":121.5183,"lat":31.307015,"count":15},
    {"lng":121.518969,"lat":31.308527,"count":3},
    {"lng":121.519936,"lat":31.308854,"count":24},
    {"lng":121.51805,"lat":31.307217,"count":12},
    {"lng":121.520579,"lat":31.308987,"count":57},
    {"lng":121.523557,"lat":31.308254,"count":5},
    {"lng":121.521367,"lat":31.30743,"count":3},
    {"lng":121.520312,"lat":31.307621,"count":100},
    {"lng":121.523874,"lat":31.307447,"count":87},
    {"lng":121.520225,"lat":31.308091,"count":32},
    {"lng":121.521801,"lat":31.308854,"count":44},
    {"lng":121.521129,"lat":31.308227,"count":21},
    {"lng":121.526426,"lat":31.308286,"count":80},
    {"lng":121.521597,"lat":31.30748,"count":32},
    {"lng":121.523895,"lat":31.307787,"count":26},
    {"lng":121.523563,"lat":31.308197,"count":17},
    {"lng":121.521982,"lat":31.308547,"count":17},
    {"lng":121.526126,"lat":31.308938,"count":25},
    {"lng":121.52326,"lat":31.307782,"count":100},
    {"lng":121.521239,"lat":31.308759,"count":39},
    {"lng":121.521185,"lat":31.307123,"count":11},
    {"lng":121.521237,"lat":31.307518,"count":9},
    {"lng":121.521784,"lat":31.307754,"count":47},
    {"lng":121.520193,"lat":31.307061,"count":52},
    {"lng":121.522735,"lat":31.307619,"count":100},
    {"lng":121.521495,"lat":31.307958,"count":46},
    {"lng":121.526292,"lat":31.308166,"count":9},
    {"lng":121.521916,"lat":31.308055,"count":8},
    {"lng":121.52189,"lat":31.308308,"count":11},
    {"lng":121.523765,"lat":31.307376,"count":3},
    {"lng":121.521232,"lat":31.307348,"count":50},
    {"lng":121.521554,"lat":31.307511,"count":15},
    {"lng":121.521568,"lat":31.308161,"count":23},
    {"lng":121.523461,"lat":31.308306,"count":3},
    {"lng":121.52232,"lat":31.30861,"count":13},
    {"lng":121.5214,"lat":31.308616,"count":6},
    {"lng":121.520679,"lat":31.307499,"count":21},
    {"lng":121.52171,"lat":31.307738,"count":29},
    {"lng":121.521836,"lat":31.308998,"count":99},
    {"lng":121.520755,"lat":31.308001,"count":10},
    {"lng":121.520077,"lat":31.307655,"count":14},
    {"lng":121.526092,"lat":31.308995,"count":16},
    {"lng":121.51935,"lat":31.308054,"count":15},
    {"lng":121.523022,"lat":31.308895,"count":13},
    {"lng":121.519551,"lat":31.308373,"count":17},
    {"lng":121.521191,"lat":31.308572,"count":1},
    {"lng":121.521612,"lat":31.307119,"count":9},
    {"lng":121.521237,"lat":31.308337,"count":54},
    {"lng":121.523776,"lat":31.308919,"count":26},
    {"lng":121.521694,"lat":31.30736,"count":17},
    {"lng":121.519377,"lat":31.308137,"count":19},
    {"lng":121.521434,"lat":31.308394,"count":43},
    {"lng":121.51988,"lat":31.308622,"count":27},
    {"lng":121.521345,"lat":31.307467,"count":8},
    {"lng":121.526883,"lat":31.307171,"count":3},
    {"lng":121.523877,"lat":31.308659,"count":34},
    {"lng":121.519712,"lat":31.307613,"count":14},
    {"lng":121.521869,"lat":31.308416,"count":12},
    {"lng":121.526956,"lat":31.307377,"count":11},
    {"lng":121.52066,"lat":31.307017,"count":38},
    {"lng":121.526244,"lat":31.307215,"count":91},
    {"lng":121.52129,"lat":31.307908,"count":54},
    {"lng":121.522116,"lat":31.307658,"count":21},
    {"lng":121.5213,"lat":31.307015,"count":15},
    {"lng":121.521969,"lat":31.308527,"count":3},
    {"lng":121.522936,"lat":31.308854,"count":24},
    {"lng":121.52105,"lat":31.307217,"count":12},
    {"lng":121.520579,"lat":31.308987,"count":57},
    {"lng":121.52076,"lat":31.307251,"count":70},
    {"lng":121.521261,"lat":31.308984,"count":50},
    {"lng":121.523332,"lat":31.308532,"count":51},
    {"lng":121.521787,"lat":31.307658,"count":15},
    {"lng":121.521455,"lat":31.307921,"count":40},
    {"lng":121.521843,"lat":31.307516,"count":100},
    {"lng":121.51946,"lat":31.308503,"count":6},
    {"lng":121.523289,"lat":31.307989,"count":18},
    {"lng":121.521162,"lat":31.307051,"count":80},
    {"lng":121.522039,"lat":31.30782,"count":11},
    {"lng":121.52387,"lat":31.307253,"count":7},
    {"lng":121.52173,"lat":31.307426,"count":42},
    {"lng":121.521107,"lat":31.308445,"count":4},
    {"lng":121.521521,"lat":31.307943,"count":27},
    {"lng":121.521812,"lat":31.307836,"count":23},
    {"lng":121.520682,"lat":31.30863,"count":60},
    {"lng":121.519424,"lat":31.308675,"count":8},
    {"lng":121.521242,"lat":31.308509,"count":15},
    {"lng":121.522766,"lat":31.308408,"count":25},
    {"lng":121.521674,"lat":31.308396,"count":21},
    {"lng":121.521268,"lat":31.30867,"count":1},
    {"lng":121.521721,"lat":31.307034,"count":51},
    {"lng":121.522456,"lat":31.30867,"count":7},
    {"lng":121.520432,"lat":31.307114,"count":11},
    {"lng":121.519013,"lat":31.308611,"count":35},
    {"lng":121.521733,"lat":31.308037,"count":22},
    {"lng":121.521336,"lat":31.308134,"count":4},
    {"lng":121.523557,"lat":31.308254,"count":5},
    {"lng":121.521367,"lat":31.30743,"count":3},
    {"lng":121.520312,"lat":31.307621,"count":100},
    {"lng":121.523874,"lat":31.307447,"count":87},
    {"lng":121.520225,"lat":31.308091,"count":32},
    {"lng":121.521801,"lat":31.308854,"count":44},
    {"lng":121.521129,"lat":31.308227,"count":21},
    {"lng":121.526426,"lat":31.308286,"count":80},
    {"lng":121.521597,"lat":31.30748,"count":32},
    {"lng":121.523895,"lat":31.307787,"count":26},
    {"lng":121.523563,"lat":31.308197,"count":17},
    {"lng":121.521982,"lat":31.308547,"count":17},
    {"lng":121.526126,"lat":31.308938,"count":25},
    {"lng":121.52326,"lat":31.307782,"count":100},
    {"lng":121.521239,"lat":31.308759,"count":39},
    {"lng":121.521185,"lat":31.307123,"count":11},
    {"lng":121.521237,"lat":31.307518,"count":9},
    {"lng":121.521784,"lat":31.307754,"count":47},
    {"lng":121.520193,"lat":31.307061,"count":52},
    {"lng":121.522735,"lat":31.307619,"count":100},
    {"lng":121.521495,"lat":31.307958,"count":46},
    {"lng":121.526292,"lat":31.308166,"count":9},
    {"lng":121.521916,"lat":31.308055,"count":8},
    {"lng":121.52189,"lat":31.308308,"count":11},
    {"lng":121.523765,"lat":31.307376,"count":3},
    {"lng":121.521232,"lat":31.307348,"count":50},
    {"lng":121.521554,"lat":31.307511,"count":15},
    {"lng":121.521568,"lat":31.308161,"count":23},
    {"lng":121.523461,"lat":31.308306,"count":3},
    {"lng":121.52232,"lat":31.30861,"count":13},
    {"lng":121.5214,"lat":31.308616,"count":6},
    {"lng":121.520679,"lat":31.307499,"count":21},
    {"lng":121.52171,"lat":31.307738,"count":29},
    {"lng":121.521836,"lat":31.308998,"count":99},
    {"lng":121.520755,"lat":31.308001,"count":10},
    {"lng":121.520077,"lat":31.307655,"count":14},
    {"lng":121.526092,"lat":31.308995,"count":16},
    {"lng":121.51935,"lat":31.308054,"count":15},
    {"lng":121.523022,"lat":31.308895,"count":13},
    {"lng":121.519551,"lat":31.308373,"count":17},
    {"lng":121.521191,"lat":31.308572,"count":1},
    {"lng":121.521612,"lat":31.307119,"count":9},
    {"lng":121.521237,"lat":31.308337,"count":54},
    {"lng":121.523776,"lat":31.308919,"count":26},
    {"lng":121.521694,"lat":31.30736,"count":17},
    {"lng":121.519377,"lat":31.308137,"count":19},
    {"lng":121.521434,"lat":31.308394,"count":43},
    {"lng":121.51988,"lat":31.308622,"count":27},
    {"lng":121.521345,"lat":31.307467,"count":8},
    {"lng":121.526883,"lat":31.307171,"count":3},
    {"lng":121.523877,"lat":31.308659,"count":34},
    {"lng":121.519712,"lat":31.307613,"count":14},
    {"lng":121.521869,"lat":31.308416,"count":12},
    {"lng":121.526956,"lat":31.307377,"count":11},
    {"lng":121.52066,"lat":31.307017,"count":38},
    {"lng":121.526244,"lat":31.307215,"count":91},
    {"lng":121.52129,"lat":31.307908,"count":54},
    {"lng":121.522116,"lat":31.307658,"count":21},
    {"lng":121.5213,"lat":31.307015,"count":15},
    {"lng":121.521969,"lat":31.308527,"count":3},
    {"lng":121.522936,"lat":31.308854,"count":24},
    {"lng":121.52105,"lat":31.307217,"count":12},
    {"lng":121.520579,"lat":31.308987,"count":57},
    {"lng":121.518261,"lat":31.306984,"count":50},
    {"lng":121.518332,"lat":31.306532,"count":51},
    {"lng":121.519787,"lat":31.300658,"count":15},
    {"lng":121.518455,"lat":31.300921,"count":40},
    {"lng":121.518843,"lat":31.305516,"count":100},
    {"lng":121.52046,"lat":31.308503,"count":6},
    {"lng":121.518289,"lat":31.309989,"count":18},
    {"lng":121.518162,"lat":31.305051,"count":80},
    {"lng":121.520039,"lat":31.30782,"count":11},
    {"lng":121.51887,"lat":31.307253,"count":7},
    {"lng":121.51773,"lat":31.309426,"count":42},
    {"lng":121.519107,"lat":31.306445,"count":4},
    {"lng":121.517521,"lat":31.307943,"count":27},
    {"lng":121.519812,"lat":31.300836,"count":23},
    {"lng":121.510682,"lat":31.30663,"count":60},
    {"lng":121.520424,"lat":31.306675,"count":8},
    {"lng":121.519242,"lat":31.306509,"count":15},
    {"lng":121.520766,"lat":31.306408,"count":25},
    {"lng":121.519674,"lat":31.306396,"count":21},
    {"lng":121.517268,"lat":31.30667,"count":1},
    {"lng":121.517721,"lat":31.300034,"count":51},
    {"lng":121.520456,"lat":31.30667,"count":7},
    {"lng":121.510432,"lat":31.309114,"count":11},
    {"lng":121.520013,"lat":31.306611,"count":35},
    {"lng":121.518733,"lat":31.306037,"count":22},
    {"lng":121.519336,"lat":31.306134,"count":4},
    {"lng":121.518557,"lat":31.306254,"count":5},
    {"lng":121.518367,"lat":31.30943,"count":3},
    {"lng":121.521312,"lat":31.309621,"count":100},
    {"lng":121.518874,"lat":31.309447,"count":87},
    {"lng":121.521225,"lat":31.306091,"count":32},
    {"lng":121.517801,"lat":31.306854,"count":44},
    {"lng":121.517129,"lat":31.308227,"count":21},
    {"lng":121.516426,"lat":31.306286,"count":80},
    {"lng":121.519597,"lat":31.30948,"count":32},
    {"lng":121.518895,"lat":31.300787,"count":26},
    {"lng":121.518563,"lat":31.306197,"count":17},
    {"lng":121.517982,"lat":31.306547,"count":17},
    {"lng":121.516126,"lat":31.306938,"count":25},
    {"lng":121.51826,"lat":31.305782,"count":100},
    {"lng":121.519239,"lat":31.306759,"count":39},
    {"lng":121.517185,"lat":31.309123,"count":11},
    {"lng":121.517237,"lat":31.307518,"count":9},
    {"lng":121.517784,"lat":31.305754,"count":47},
    {"lng":121.510193,"lat":31.307061,"count":52},
    {"lng":121.520735,"lat":31.305619,"count":100},
    {"lng":121.518495,"lat":31.305958,"count":46},
    {"lng":121.516292,"lat":31.306166,"count":9},
    {"lng":121.519916,"lat":31.306055,"count":8},
    {"lng":121.51989,"lat":31.306308,"count":11},
    {"lng":121.518765,"lat":31.309376,"count":3},
    {"lng":121.518232,"lat":31.300348,"count":50},
    {"lng":121.517554,"lat":31.300511,"count":15},
    {"lng":121.518568,"lat":31.308161,"count":23},
    {"lng":121.518461,"lat":31.306306,"count":3},
    {"lng":121.52032,"lat":31.30661,"count":13},
    {"lng":121.5174,"lat":31.308616,"count":6},
    {"lng":121.521679,"lat":31.305499,"count":21},
    {"lng":121.51971,"lat":31.305738,"count":29},
    {"lng":121.517836,"lat":31.306998,"count":99},
    {"lng":121.510755,"lat":31.308001,"count":10},
    {"lng":121.521077,"lat":31.300655,"count":14},
    {"lng":121.516092,"lat":31.306995,"count":16},
    {"lng":121.52035,"lat":31.306054,"count":15},
    {"lng":121.518022,"lat":31.306895,"count":13},
    {"lng":121.520551,"lat":31.306373,"count":17},
    {"lng":121.519191,"lat":31.306572,"count":1},
    {"lng":121.519612,"lat":31.307119,"count":9},
    {"lng":121.518237,"lat":31.306337,"count":54},
    {"lng":121.518776,"lat":31.306919,"count":26},
    {"lng":121.517694,"lat":31.30536,"count":17},
    {"lng":121.520377,"lat":31.306137,"count":19},
    {"lng":121.517434,"lat":31.306394,"count":43},
    {"lng":121.52088,"lat":31.306622,"count":27},
    {"lng":121.518345,"lat":31.309467,"count":8},
    {"lng":121.516883,"lat":31.307171,"count":3},
    {"lng":121.518877,"lat":31.306659,"count":34},
    {"lng":121.520712,"lat":31.305613,"count":14},
    {"lng":121.519869,"lat":31.306416,"count":12},
    {"lng":121.516956,"lat":31.305377,"count":11},
    {"lng":121.51066,"lat":31.305017,"count":38},
    {"lng":121.516244,"lat":31.300215,"count":91},
    {"lng":121.51929,"lat":31.305908,"count":54},
    {"lng":121.520116,"lat":31.309658,"count":21},
    {"lng":121.5183,"lat":31.305015,"count":15},
    {"lng":121.519969,"lat":31.306527,"count":3},
    {"lng":121.520936,"lat":31.306854,"count":24},
    {"lng":121.51905,"lat":31.309217,"count":12},
    {"lng":121.521579,"lat":31.306987,"count":57},
    {"lng":121.51076,"lat":31.305251,"count":70},
    {"lng":121.521261,"lat":31.306984,"count":50},
    {"lng":121.523332,"lat":31.306532,"count":51},
    {"lng":121.521787,"lat":31.300658,"count":15},
    {"lng":121.521455,"lat":31.300921,"count":40},
    {"lng":121.521843,"lat":31.305516,"count":100},
    {"lng":121.51946,"lat":31.308503,"count":6},
    {"lng":121.523289,"lat":31.309989,"count":18},
    {"lng":121.521162,"lat":31.305051,"count":80},
    {"lng":121.522039,"lat":31.30782,"count":11},
    {"lng":121.52387,"lat":31.307253,"count":7},
    {"lng":121.52173,"lat":31.309426,"count":42},
    {"lng":121.521107,"lat":31.306445,"count":4},
    {"lng":121.521521,"lat":31.307943,"count":27},
    {"lng":121.521812,"lat":31.300836,"count":23},
    {"lng":121.520682,"lat":31.30663,"count":60},
    {"lng":121.519424,"lat":31.306675,"count":8},
    {"lng":121.521242,"lat":31.306509,"count":15},
    {"lng":121.522766,"lat":31.306408,"count":25},
    {"lng":121.521674,"lat":31.306396,"count":21},
    {"lng":121.521268,"lat":31.30667,"count":1},
    {"lng":121.521721,"lat":31.300034,"count":51},
    {"lng":121.522456,"lat":31.30667,"count":7},
    {"lng":121.520432,"lat":31.309114,"count":11},
    {"lng":121.519013,"lat":31.306611,"count":35},
    {"lng":121.521733,"lat":31.306037,"count":22},
    {"lng":121.521336,"lat":31.306134,"count":4},
    {"lng":121.523557,"lat":31.306254,"count":5},
    {"lng":121.521367,"lat":31.30943,"count":3},
    {"lng":121.520312,"lat":31.309621,"count":100},
    {"lng":121.523874,"lat":31.309447,"count":87},
    {"lng":121.520225,"lat":31.306091,"count":32},
    {"lng":121.521801,"lat":31.306854,"count":44},
    {"lng":121.521129,"lat":31.308227,"count":21},
    {"lng":121.526426,"lat":31.306286,"count":80},
    {"lng":121.521597,"lat":31.30948,"count":32},
    {"lng":121.523895,"lat":31.300787,"count":26},
    {"lng":121.523563,"lat":31.306197,"count":17},
    {"lng":121.521982,"lat":31.306547,"count":17},
    {"lng":121.526126,"lat":31.306938,"count":25},
    {"lng":121.52326,"lat":31.305782,"count":100},
    {"lng":121.521239,"lat":31.306759,"count":39},
    {"lng":121.521185,"lat":31.309123,"count":11},
    {"lng":121.521237,"lat":31.307518,"count":9},
    {"lng":121.521784,"lat":31.305754,"count":47},
    {"lng":121.520193,"lat":31.307061,"count":52},
    {"lng":121.522735,"lat":31.305619,"count":100},
    {"lng":121.521495,"lat":31.305958,"count":46},
    {"lng":121.526292,"lat":31.306166,"count":9},
    {"lng":121.521916,"lat":31.306055,"count":8},
    {"lng":121.52189,"lat":31.306308,"count":11},
    {"lng":121.523765,"lat":31.309376,"count":3},
    {"lng":121.521232,"lat":31.300348,"count":50},
    {"lng":121.521554,"lat":31.300511,"count":15},
    {"lng":121.521568,"lat":31.308161,"count":23},
    {"lng":121.523461,"lat":31.306306,"count":3},
    {"lng":121.52232,"lat":31.30661,"count":13},
    {"lng":121.5214,"lat":31.308616,"count":6},
    {"lng":121.520679,"lat":31.305499,"count":21},
    {"lng":121.52171,"lat":31.305738,"count":29},
    {"lng":121.521836,"lat":31.306998,"count":99},
    {"lng":121.520755,"lat":31.308001,"count":10},
    {"lng":121.520077,"lat":31.300655,"count":14},
    {"lng":121.526092,"lat":31.306995,"count":16},
    {"lng":121.51935,"lat":31.306054,"count":15},
    {"lng":121.523022,"lat":31.306895,"count":13},
    {"lng":121.519551,"lat":31.306373,"count":17},
    {"lng":121.521191,"lat":31.306572,"count":1},
    {"lng":121.521612,"lat":31.307119,"count":9},
    {"lng":121.521237,"lat":31.306337,"count":54},
    {"lng":121.523776,"lat":31.306919,"count":26},
    {"lng":121.521694,"lat":31.30536,"count":17},
    {"lng":121.519377,"lat":31.306137,"count":19},
    {"lng":121.521434,"lat":31.306394,"count":43},
    {"lng":121.51988,"lat":31.306622,"count":27},
    {"lng":121.521345,"lat":31.309467,"count":8},
    {"lng":121.526883,"lat":31.307171,"count":3},
    {"lng":121.523877,"lat":31.306659,"count":34},
    {"lng":121.519712,"lat":31.305613,"count":14},
    {"lng":121.521869,"lat":31.306416,"count":12},
    {"lng":121.526956,"lat":31.305377,"count":11},
    {"lng":121.52066,"lat":31.305017,"count":38},
    {"lng":121.526244,"lat":31.300215,"count":91},
    {"lng":121.52129,"lat":31.305908,"count":54},
    {"lng":121.522116,"lat":31.309658,"count":21},
    {"lng":121.5213,"lat":31.305015,"count":15},
    {"lng":121.521969,"lat":31.306527,"count":3},
    {"lng":121.522936,"lat":31.306854,"count":24},
    {"lng":121.52105,"lat":31.309217,"count":12},
    {"lng":121.520579,"lat":31.306987,"count":57},
    {"lng":121.52076,"lat":31.305251,"count":70},
    {"lng":121.521261,"lat":31.306984,"count":50},
    {"lng":121.523332,"lat":31.306532,"count":51},
    {"lng":121.521787,"lat":31.300658,"count":15},
    {"lng":121.521455,"lat":31.300921,"count":40},
    {"lng":121.521843,"lat":31.305516,"count":100},
    {"lng":121.51946,"lat":31.308503,"count":6},
    {"lng":121.523289,"lat":31.309989,"count":18},
    {"lng":121.521162,"lat":31.305051,"count":80},
    {"lng":121.522039,"lat":31.30782,"count":11},
    {"lng":121.52387,"lat":31.307253,"count":7},
    {"lng":121.52173,"lat":31.309426,"count":42},
    {"lng":121.521107,"lat":31.306445,"count":4},
    {"lng":121.521521,"lat":31.307943,"count":27},
    {"lng":121.521812,"lat":31.300836,"count":23},
    {"lng":121.520682,"lat":31.30663,"count":60},
    {"lng":121.519424,"lat":31.306675,"count":8},
    {"lng":121.521242,"lat":31.306509,"count":15},
    {"lng":121.522766,"lat":31.306408,"count":25},
    {"lng":121.521674,"lat":31.306396,"count":21},
    {"lng":121.521268,"lat":31.30667,"count":1},
    {"lng":121.521721,"lat":31.300034,"count":51},
    {"lng":121.522456,"lat":31.30667,"count":7},
    {"lng":121.520432,"lat":31.309114,"count":11},
    {"lng":121.519013,"lat":31.306611,"count":35},
    {"lng":121.521733,"lat":31.306037,"count":22},
    {"lng":121.521336,"lat":31.306134,"count":4},
    {"lng":121.523557,"lat":31.306254,"count":5},
    {"lng":121.521367,"lat":31.30943,"count":3},
    {"lng":121.520312,"lat":31.309621,"count":100},
    {"lng":121.523874,"lat":31.309447,"count":87},
    {"lng":121.520225,"lat":31.306091,"count":32},
    {"lng":121.521801,"lat":31.306854,"count":44},
    {"lng":121.521129,"lat":31.308227,"count":21},
    {"lng":121.526426,"lat":31.306286,"count":80},
    {"lng":121.521597,"lat":31.30948,"count":32},
    {"lng":121.523895,"lat":31.300787,"count":26},
    {"lng":121.523563,"lat":31.306197,"count":17},
    {"lng":121.521982,"lat":31.306547,"count":17},
    {"lng":121.526126,"lat":31.306938,"count":25},
    {"lng":121.52326,"lat":31.305782,"count":100},
    {"lng":121.521239,"lat":31.306759,"count":39},
    {"lng":121.521185,"lat":31.309123,"count":11},
    {"lng":121.521237,"lat":31.307518,"count":9},
    {"lng":121.521784,"lat":31.305754,"count":47},
    {"lng":121.520193,"lat":31.307061,"count":52},
    {"lng":121.522735,"lat":31.305619,"count":100},
    {"lng":121.521495,"lat":31.305958,"count":46},
    {"lng":121.526292,"lat":31.306166,"count":9},
    {"lng":121.521916,"lat":31.306055,"count":8},
    {"lng":121.52189,"lat":31.306308,"count":11},
    {"lng":121.523765,"lat":31.309376,"count":3},
    {"lng":121.521232,"lat":31.300348,"count":50},
    {"lng":121.521554,"lat":31.300511,"count":15},
    {"lng":121.521568,"lat":31.308161,"count":23},
    {"lng":121.523461,"lat":31.306306,"count":3},
    {"lng":121.52232,"lat":31.30661,"count":13},
    {"lng":121.5214,"lat":31.308616,"count":6},
    {"lng":121.520679,"lat":31.305499,"count":21},
    {"lng":121.52171,"lat":31.305738,"count":29},
    {"lng":121.521836,"lat":31.306998,"count":99},
    {"lng":121.520755,"lat":31.308001,"count":10},
    {"lng":121.520077,"lat":31.300655,"count":14},
    {"lng":121.526092,"lat":31.306995,"count":16},
    {"lng":121.51935,"lat":31.306054,"count":15},
    {"lng":121.523022,"lat":31.306895,"count":13},
    {"lng":121.519551,"lat":31.306373,"count":17},
    {"lng":121.521191,"lat":31.306572,"count":1},
    {"lng":121.521612,"lat":31.307119,"count":9},
    {"lng":121.521237,"lat":31.306337,"count":54},
    {"lng":121.523776,"lat":31.306919,"count":26},
    {"lng":121.521694,"lat":31.30536,"count":17},
    {"lng":121.519377,"lat":31.306137,"count":19},
    {"lng":121.521434,"lat":31.306394,"count":43},
    {"lng":121.51988,"lat":31.306622,"count":27},
    {"lng":121.521345,"lat":31.309467,"count":8},
    {"lng":121.526883,"lat":31.307171,"count":3},
    {"lng":121.523877,"lat":31.306659,"count":34},
    {"lng":121.519712,"lat":31.305613,"count":14},
    {"lng":121.521869,"lat":31.306416,"count":12},
    {"lng":121.526956,"lat":31.305377,"count":11},
    {"lng":121.52066,"lat":31.305017,"count":38},
    {"lng":121.526244,"lat":31.300215,"count":91},
    {"lng":121.52129,"lat":31.305908,"count":54},
    {"lng":121.522116,"lat":31.309658,"count":21},
    {"lng":121.5213,"lat":31.305015,"count":15},
    {"lng":121.521969,"lat":31.306527,"count":3},
    {"lng":121.522936,"lat":31.306854,"count":24},
    {"lng":121.52105,"lat":31.309217,"count":12},
    {"lng":121.520579,"lat":31.306987,"count":57},
    {"lng":121.52076,"lat":31.305251,"count":70},
    {"lng":121.519867,"lat":31.308989,"count":8}];

    if(!isSupportCanvas()){
    	alert('热力图目前只支持有canvas支持的浏览器,您所使用的浏览器不能使用热力图功能~')
    }
	//详细的参数,可以查看heatmap.js的文档 https://github.com/pa7/heatmap.js/blob/master/README.md
	//参数说明如下:
	/* visible 热力图是否显示,默认为true
     * opacity 热力的透明度,1-100
     * radius 势力图的每个点的半径大小
     * gradient  {JSON} 热力图的渐变区间 . gradient如下所示
     *	{
			.2:'rgb(0, 255, 255)',
			.5:'rgb(0, 110, 255)',
			.8:'rgb(100, 0, 255)'
		}
		其中 key 表示插值的位置, 0~1.
		    value 为颜色值.
     */
    heatmapOverlay = new BMapLib.HeatmapOverlay({"radius":20});
    map.addOverlay(heatmapOverlay);
    heatmapOverlay.setDataSet({data:points,max:100});
    //是否显示热力图
    function openHeatmap(){
        heatmapOverlay.show();
    }
    function closeHeatmap(){
        heatmapOverlay.hide();
    }
    openHeatmap();
    function setGradient(){
     	/*格式如下所示:
		{
	  		0:'rgb(102, 255, 0)',
	 	 	.5:'rgb(255, 170, 0)',
		  	1:'rgb(255, 0, 0)'
		}*/
     	var gradient = {};
     	var colors = document.querySelectorAll("input[type='color']");
     	colors = [].slice.call(colors,0);
     	colors.forEach(function(ele){
			gradient[ele.getAttribute("data-key")] = ele.value;
     	});
        heatmapOverlay.setOptions({"gradient":gradient});
    }
	//判断浏览区是否支持canvas
    function isSupportCanvas(){
        var elem = document.createElement('canvas');
        return !!(elem.getContext && elem.getContext('2d'));
    }
</script>
