<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>02</title>
<script type="text/javascript" src="../../jquery/jquery-2.0.0.min.js"></script>
<script type="text/javascript" src="../../js/mt.js"></script>
<script type="text/javascript" src="../../js/ani.js"></script>
<script type="text/javascript" src="../../js/gd.js"></script>
<script type="text/javascript" src="js/main.js"></script>
<style type="text/css">

body{
	background-color: #333;
}
canvas{
	position: absolute;
	display: block;
	left: 0px;
	top: 0px;
	right: 0px;
	bottom: 0px;
	width: 100%;
	height: 100%;
	background: transparent url(image/bg.jpg) left top no-repeat;
	/*background-color: #000;*/
	/*width: 1100px;*/
	/*height: 900px;*/
}
.full{
	position: absolute;
	left: 0px;
	top: 0px;
	width: 1920px;
	height: 1080px;
	background-image: url(image/bg.jpg);
	overflow: hidden;
	perspective: 800;
	-webkit-perspective: 800;
	-moz-perspective: 800;
}

#time{
	width: 1762px;
	height: 96px;
	background: transparent url(image/timelight.png) left top no-repeat;
	position: absolute;
	left: 50%;
	margin-left: -881px;
	bottom: 70px;
	color: #fff;
	font-family: "MicrosoftYaHei", Arial;
	background-color: rgba(0,0,255,0.1);
}

#time .grid{
	width: 158px;
	border-right: 1px solid #101a3b;
	height: 94px;
	line-height: 94px;
	background-color: rgba(0,105,224,0.3);
	float: left;
	text-align: center;
	font-size: 30px;
	cursor: pointer;
	transition: font-size 0.1s;
	-webkit-transition: font-size 0.1s;
	-moz-transition: font-size 0.1s;
}

#time .grid.active{
	border: 5px solid #ffae00;
	margin-top: -2px;
	background-color: #9d7930;
	font-weight: bold;
	font-size: 40px;
}
.hidden{
	display: none;
}

</style>
</head>
<body>

<canvas width="600" height="300"></canvas>


<script type="text/javascript">

var canvas = document.querySelector('canvas');
var ctx = canvas.getContext('2d');

(function(win){

function drawLightH(ctx, t, size){

	
	var a = 1;

	if(t < 0){
		a = -1;
		t += 1;
	}
	var y = (ctx.canvas.height + size * 2) * t;


	var y, s, grd;
	ctx.beginPath();
	if(a > 0){
		s = size;
		y = (ctx.canvas.height + size * 2) * t;
		ctx.rect(0, y - size, ctx.canvas.width, size);
		grd = ctx.createLinearGradient(0, y - size, 0, y);
	} else {
		y = (ctx.canvas.height + size * 1) * t;
		s = -size;
		ctx.rect(0, y - size, ctx.canvas.width, size);
		grd = ctx.createLinearGradient(0, y - size, 0, y);
	}


	grd.addColorStop(0.0,"rgba(255,255,255,0)");
	grd.addColorStop(0.3,"rgba(255,255,255,0.3)");
	grd.addColorStop(0.6,"rgba(255,255,255,0.3)");
	grd.addColorStop(1.0,"rgba(255,255,255,0)");

	ctx.save();
	ctx.lineWidth = size;
	ctx.fillStyle = grd;
	ctx.fill();
	ctx.restore();
}

function createRandomDur(base){
	return (0.8 + 0.4 * Math.random()) * (base || 1000) * (Math.random() > 0.5 ? -1 : 1);
}

function createRandomSize(ctx){
	return (0.05 + 0.5 * Math.random()) * Math.min(ctx.canvas.width, ctx.canvas.height);
}


function createLight(ctx, baseTime){
	var c = 0;
	baseTime = baseTime || 4000;
	var l = 1;

	for(var i = 0; i < l; i++){
		(function(I){
			setTimeout(function(){
					Ani.add(function(t){
						var r = t / baseTime * 2;
						if(r > 1){
							r = 2 - r;
						}
						drawLightH(ctx, r, ctx.canvas.width / 20 * (1 - I / l));
						return -1;
					}, baseTime);
				
			}, (baseTime / 40) * i);
		})(i);
	}
}

win.createLight = createLight;

})(window)



Ani.addBase(function(){
	ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
	return -1;
});

createLight(ctx);





</script>


</body>
</html>